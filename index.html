<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADHD å®¶é•¿ä¸“ä¸šè§‚å¯Ÿæµ‹è¯„ï¼ˆSNAP-IV å‚è€ƒç‰ˆï¼‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #F0F4F8;
            color: #334E68;
        }
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.5s ease;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
        .card-shadow {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
        }
        .gradient-text {
            background: linear-gradient(135deg, #1A365D 0%, #2B6CB0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .wechat-gradient {
            background: linear-gradient(135deg, #07C160 0%, #06AD56 100%);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="app" class="max-w-md mx-auto pb-12">
        <!-- æ¬¢è¿é¡µé¢ -->
        <transition name="fade" mode="out-in">
            <div v-if="step === 'welcome'" key="welcome" class="bg-white rounded-3xl p-8 card-shadow">
                <div class="mb-6 inline-block p-3 bg-blue-50 rounded-2xl">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                    </svg>
                </div>
                <h1 class="text-2xl font-bold mb-4 text-gray-800">ADHD å®¶é•¿ä¸“ä¸šè§‚å¯Ÿæµ‹è¯„</h1>
                <p class="text-gray-500 text-sm leading-relaxed mb-8">
                    æœ¬æµ‹è¯„å‚è€ƒå›½é™…é€šç”¨çš„ SNAP-IV ç—‡çŠ¶è¯„å®šé‡è¡¨ï¼Œæ—¨åœ¨å¸®åŠ©å®¶é•¿é€šè¿‡æ—¥å¸¸è§‚å¯Ÿï¼Œåˆæ­¥è¯„ä¼°å­©å­åœ¨æ³¨æ„åŠ›ã€å¤šåŠ¨åŠå†²åŠ¨æ–¹é¢çš„è¡¨ç°ã€‚
                </p>
                <div class="bg-amber-50 border-l-4 border-amber-400 p-4 mb-8 text-xs text-amber-800 leading-relaxed">
                    <strong>å…è´£å£°æ˜ï¼š</strong> æœ¬æµ‹è¯„ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºåŒ»ç–—è¯Šæ–­å»ºè®®ã€‚ADHD çš„ç¡®è¯Šéœ€ç”±ä¸“ä¸šåŒ»ç”Ÿç»“åˆä¸´åºŠè®¿è°ˆåŠå¤šç»´åº¦æµ‹è¯„ç»¼åˆåˆ¤å®šã€‚
                </div>
                <button @click="startTest" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-4 rounded-2xl transition duration-300 shadow-lg shadow-blue-100">
                    å¼€å§‹ä¸“ä¸šæµ‹è¯„ï¼ˆ20é¢˜ï¼‰
                </button>
            </div>

            <!-- æµ‹è¯„é¡µé¢ -->
            <div v-else-if="step === 'testing'" key="testing" class="bg-white rounded-3xl p-8 card-shadow">
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-xs font-bold text-blue-600">é¢˜ç›® {{ currentQuestionIndex + 1 }} / {{ questions.length }}</span>
                        <span class="text-xs text-gray-400 font-mono">{{ Math.round(((currentQuestionIndex + 1) / questions.length) * 100) }}%</span>
                    </div>
                    <div class="w-full bg-gray-100 h-1.5 rounded-full overflow-hidden">
                        <div class="bg-blue-600 h-full transition-all duration-500" :style="{ width: ((currentQuestionIndex + 1) / questions.length) * 100 + '%' }"></div>
                    </div>
                </div>

                <div class="min-h-[100px] mb-8">
                    <span class="inline-block px-2 py-0.5 bg-gray-100 text-gray-500 text-[10px] rounded mb-2">{{ questions[currentQuestionIndex].category }}</span>
                    <h2 class="text-lg font-bold text-gray-800 leading-snug">
                        {{ questions[currentQuestionIndex].text }}
                    </h2>
                </div>

                <div class="space-y-3">
                    <button v-for="(option, index) in options" :key="index" @click="selectOption(index)" 
                            class="w-full text-left p-4 rounded-2xl border border-gray-100 hover:border-blue-600 hover:bg-blue-50 transition duration-200 group">
                        <div class="flex items-center justify-between">
                            <span class="text-gray-600 group-hover:text-blue-700 text-sm font-medium">{{ option.label }}</span>
                            <div class="w-5 h-5 rounded-full border-2 border-gray-200 group-hover:border-blue-600 flex items-center justify-center">
                                <div v-if="false" class="w-2.5 h-2.5 bg-blue-600 rounded-full"></div>
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- ç»“æœé¡µé¢ -->
            <div v-else-if="step === 'result'" key="result" class="space-y-6">
                <div id="capture-area" class="space-y-6 bg-[#F0F4F8] p-2 rounded-3xl">
                    <!-- æ ¸å¿ƒç»“æœå¡ç‰‡ -->
                    <div class="bg-white rounded-3xl p-8 card-shadow">
                        <div class="flex justify-between items-start mb-6">
                            <div>
                                <h3 class="text-sm text-gray-400 font-bold uppercase tracking-wider mb-1">Observation Report</h3>
                                <div class="text-2xl font-black gradient-text">{{ resultTitle }}</div>
                            </div>
                            <div class="bg-blue-50 px-3 py-1 rounded-lg text-blue-700 text-xs font-bold">
                                Score: {{ score }}
                            </div>
                        </div>
                        
                        <p class="text-gray-600 leading-relaxed text-sm mb-6 pb-6 border-b border-gray-50">
                            {{ resultDescription }}
                        </p>

                        <!-- å¼•æµé’©å­å¡ç‰‡ -->
                        <div class="bg-gray-50 rounded-2xl p-6 text-center">
                            <div class="text-blue-600 font-bold text-sm mb-2">ğŸ ä¸“å®¶å»ºè®®ä¸èµ„æº</div>
                            <p class="text-gray-500 text-xs mb-4 leading-relaxed">
                                ä¸ºäº†å¸®åŠ©æ‚¨æ›´å¥½åœ°åº”å¯¹å­©å­åœ¨å­¦ä¹ å’Œç”Ÿæ´»ä¸­çš„æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æ•´ç†äº† <strong>ã€ŠADHD å®¶é•¿å®æ“è¾…å¯¼æ‰‹å†Œã€‹</strong>ï¼ŒåŒ…å«ï¼š
                            </p>
                            <ul class="text-[10px] text-gray-400 flex flex-wrap justify-center gap-2 mb-4">
                                <li class="bg-white px-2 py-1 rounded shadow-sm">é«˜æ•ˆè¾…å¯¼ä½œä¸š 5 æ­¥æ³•</li>
                                <li class="bg-white px-2 py-1 rounded shadow-sm">è¡Œä¸ºå¥‘çº¦æ¨¡æ¿</li>
                                <li class="bg-white px-2 py-1 rounded shadow-sm">ä¸“ä¸šæœºæ„æ¸…å•</li>
                            </ul>
                            <button @click="copyWeChat" class="w-full wechat-gradient text-white text-sm font-bold py-3 rounded-xl shadow-md flex items-center justify-center transition active:scale-95">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M8.225 3.85c-4.11 0-7.442 2.768-7.442 6.182 0 1.94 1.077 3.673 2.756 4.848l-.693 2.54 2.508-1.25c.82.228 1.683.352 2.585.352.128 0 .254-.002.38-.008-.12-.413-.185-.847-.185-1.295 0-2.618 2.54-4.74 5.674-4.74.332 0 .656.024.97.068-.616-3.868-3.95-6.697-8.553-6.697zm6.75 6.74c-3.134 0-5.675 2.122-5.675 4.74 0 2.617 2.541 4.74 5.675 4.74.693 0 1.353-.105 1.967-.28l1.91 1.02-.527-1.928c1.278-.895 2.096-2.214 2.096-3.692 0-2.618-2.541-4.74-5.675-4.74z"/></svg>
                                {{ copyStatus || 'ç‚¹å‡»å¤åˆ¶å¾®ä¿¡ï¼Œé¢†å–æ‰‹å†Œ' }}
                            </button>
                            <p class="mt-2 text-[10px] text-gray-400 font-bold">å¾®ä¿¡å·ï¼šADHD-Support-Team</p>
                        </div>
                    </div>

                    <!-- ç¡¬å»ºè®®æ¨¡å— -->
                    <div class="bg-gray-800 rounded-3xl p-8 card-shadow text-white">
                        <h4 class="font-bold mb-6 flex items-center text-blue-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                            </svg>
                            ä¸‹ä¸€é˜¶æ®µä¸“ä¸šå»ºè®®
                        </h4>
                        <ul class="space-y-6 text-left">
                            <li v-for="guide in actionGuides" class="relative pl-6 border-l-2 border-gray-700 pb-2">
                                <div class="absolute -left-[5px] top-0 w-2 h-2 bg-blue-500 rounded-full"></div>
                                <span class="block text-blue-400 font-bold text-xs mb-1 uppercase tracking-tighter">{{ guide.title }}</span>
                                <p class="text-gray-300 text-xs leading-relaxed">{{ guide.content }}</p>
                            </li>
                        </ul>
                    </div>

                    <!-- å…è´£å£°æ˜é¡µè„š -->
                    <div class="text-center px-4">
                        <p class="text-[10px] text-gray-400 leading-relaxed">
                            æœ¬æµ‹è¯„ç”± AI æŠ€æœ¯é©±åŠ¨ï¼Œç»“æœå‚è€ƒ SNAP-IV å¸¸æ¨¡æ•°æ®ã€‚<br>æ³¨æ„ï¼šADHD çš„ç¡®è¯Šå¿…é¡»ç”±å…·å¤‡æ‰§ä¸šèµ„æ ¼çš„ç²¾ç¥ç§‘åŒ»ç”Ÿæˆ–å„¿ç§‘åŒ»ç”Ÿè¿›è¡Œã€‚
                        </p>
                    </div>
                </div>

                <div class="px-2 space-y-3">
                    <button @click="saveAsImage" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-2xl transition duration-300 shadow-lg flex items-center justify-center">
                        <svg v-if="!isSaving" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                        <svg v-else class="animate-spin h-5 w-5 mr-2 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                        {{ isSaving ? 'æ­£åœ¨ç”Ÿæˆé•¿å›¾...' : 'ä¿å­˜æµ‹è¯„ç»“æœé•¿å›¾' }}
                    </button>
                    <button @click="reset" class="w-full py-3 text-xs font-bold text-gray-400 hover:text-blue-600 transition tracking-widest">
                        RESTART ASSESSMENT
                    </button>
                </div>
            </div>
        </transition>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const step = ref('welcome');
                const currentQuestionIndex = ref(0);
                const score = ref(0);
                const isSaving = ref(false);
                const copyStatus = ref('');

                const questions = [
                    // æ³¨æ„åŠ›ç¼ºé™·ç»´åº¦
                    { text: "åœ¨è¾…å¯¼ä½œä¸šæˆ–ç©è€æ—¶ï¼Œæ˜¯å¦éš¾ä»¥ç»´æŒæ³¨æ„åŠ›ï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 2 },
                    { text: "å½“æ‚¨ç›´æ¥å¯¹ä»–è¯´è¯æ—¶ï¼Œä»–æ˜¯å¦ç»å¸¸æ˜¾å¾—æ²¡åœ¨å¬ï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 2 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸æ— æ³•æŒ‰æŒ‡ä»¤å®ŒæˆåŠŸè¯¾ã€æ‚åŠ¡æˆ–ä»»åŠ¡ï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 2 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸åœ¨ç»„ç»‡ä»»åŠ¡å’Œæ´»åŠ¨æ–¹é¢æœ‰å›°éš¾ï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 1 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸é€ƒé¿ã€åŒæ¶æˆ–ä¸æ„¿å‚åŠ éœ€è¦æŒç»­åŠªåŠ›çš„ä»»åŠ¡ï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 2 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸ä¸¢å¤±å­¦ä¹ ç”¨å“ï¼ˆå¦‚ï¼šç¬”ã€ä¹¦æœ¬ã€å·¥å…·ï¼‰ï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 1 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸å®¹æ˜“è¢«å¤–ç•Œåˆºæ¿€å¹²æ‰°è€Œåˆ†å¿ƒï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 2 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸åœ¨æ—¥å¸¸æ´»åŠ¨ä¸­è¡¨ç°å¾—ä¸¢ä¸‰è½å››ï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 1 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸åœ¨ç»†èŠ‚ä¸Šä¸æ³¨æ„ï¼Œå¸¸åœ¨ä½œä¸šä¸­å‡ºé”™ï¼Ÿ", category: "æ³¨æ„åŠ›ç¼ºé™·", weight: 1 },
                    // å¤šåŠ¨/å†²åŠ¨ç»´åº¦
                    { text: "åœ¨åº§ä½ä¸Šæ—¶ï¼Œæ‰‹è„šç»å¸¸åŠ¨ä¸ªä¸åœæˆ–èº«ä½“æ‰­åŠ¨ï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 2 },
                    { text: "åœ¨éœ€è¦å®‰é™åç€çš„åœºåˆï¼ˆå¦‚è¯¾å ‚ï¼‰ç»å¸¸æ“…è‡ªç¦»å¼€åº§ä½ï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 2 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸åœ¨ä¸é€‚å½“çš„åœºåˆä¹±è·‘æˆ–ä¹±çˆ¬ï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 2 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸éš¾ä»¥å®‰é™åœ°å‚åŠ ä¼‘é—²æ´»åŠ¨ï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 1 },
                    { text: "ä»–æ˜¯å¦çœ‹èµ·æ¥æ€»æ˜¯â€œåƒè£…äº†é©¬è¾¾ä¸€æ ·â€å¿™ä¸ªä¸åœï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 2 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸è¯´è¯è¿‡å¤šï¼Œéš¾ä»¥åœä¸‹æ¥ï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 1 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸åœ¨é—®é¢˜è¿˜æ²¡é—®å®Œæ—¶å°±æŠ¢ç€å›ç­”ï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 2 },
                    { text: "ä»–æ˜¯å¦éš¾ä»¥æ’é˜Ÿç­‰å€™æˆ–è½®æµè¿›è¡Œæ¸¸æˆæ´»åŠ¨ï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 2 },
                    { text: "ä»–æ˜¯å¦ç»å¸¸æ‰“æ–­æˆ–å¹²æ‰°ä»–äººçš„è°ˆè¯æˆ–æ¸¸æˆï¼Ÿ", category: "å¤šåŠ¨/å†²åŠ¨", weight: 2 },
                    // ç»¼åˆè¡¨ç°
                    { text: "ä»–æ˜¯å¦ç»å¸¸åœ¨ä»»åŠ¡æˆ–æ¸¸æˆä¸­æ— æ³•åšæŒåˆ°åº•ï¼Ÿ", category: "ç»¼åˆè¡¨ç°", weight: 2 },
                    { text: "åœ¨å—æŒ«æ—¶ï¼Œä»–æ˜¯å¦æ¯”åŒé¾„å­©å­æ›´å®¹æ˜“çˆ†å‘æƒ…ç»ªï¼Ÿ", category: "ç»¼åˆè¡¨ç°", weight: 2 }
                ];

                const options = [
                    { label: "ä»ä¸æˆ–å¾ˆå°‘", score: 0 },
                    { label: "å¶å°”å¦‚æ­¤", score: 1 },
                    { label: "ç»å¸¸å¦‚æ­¤", score: 2 },
                    { label: "æ€»æ˜¯å¦‚æ­¤", score: 3 }
                ];

                const startTest = () => {
                    step.value = 'testing';
                };

                const selectOption = (index) => {
                    score.value += options[index].score * questions[currentQuestionIndex.value].weight;
                    if (currentQuestionIndex.value < questions.length - 1) {
                        currentQuestionIndex.value++;
                    } else {
                        step.value = 'result';
                    }
                };

                const resultTitle = computed(() => {
                    if (score.value < 25) return "è§‚å¯Ÿæ€§é˜¶æ®µ (Monitoring)";
                    if (score.value < 55) return "ä¸­åº¦é£é™© (Attention Required)";
                    return "é«˜åº¦é£é™© (Clinical Action Needed)";
                });

                const resultDescription = computed(() => {
                    if (score.value < 25) return "å­©å­ç›®å‰åœ¨æ³¨æ„åŠ›å’Œå¤šåŠ¨æ–¹é¢çš„è¡¨ç°å¤„äºåŒé¾„äººæ­£å¸¸æ³¢åŠ¨èŒƒå›´ã€‚å»ºè®®ä¿æŒè§‚å¯Ÿï¼Œé‡ç‚¹åŸ¹å…»è‰¯å¥½çš„ç”Ÿæ´»ä½œæ¯å’Œä¸“æ³¨ä¹ æƒ¯ã€‚";
                    if (score.value < 55) return "æµ‹è¯„æ˜¾ç¤ºå­©å­åœ¨æ³¨æ„åŠ›æˆ–å¤šåŠ¨ç»´åº¦å­˜åœ¨æ˜æ˜¾å€¾å‘ã€‚è¿™äº›è¡¨ç°å¯èƒ½å·²ç»å¼€å§‹å½±å“å…¶å­¦ä¹ æ•ˆç‡æˆ–äº²å­å…³ç³»ï¼Œå»ºè®®å»ºç«‹ç»“æ„åŒ–çš„è¡Œä¸ºå¥‘çº¦ï¼Œå¹¶å…³æ³¨æƒ…ç»ªå˜åŒ–ã€‚";
                    return "æµ‹è¯„ç»“æœæ˜¾è‘—é«˜äºå¸¸æ¨¡å‚è€ƒå€¼ã€‚å­©å­çš„ç‰¹è´¨å¯èƒ½å·²ç»å¯¹å…¶å­¦ä¸šã€ç¤¾äº¤å’Œå¿ƒç†å¥åº·é€ æˆæŒç»­å‹åŠ›ã€‚å¼ºçƒˆå»ºè®®é¢„çº¦ä¸“ä¸šåŒ»ç–—æœºæ„è¿›è¡Œä¸´åºŠè¯Šæ–­ï¼Œä»¥ä¾¿è·å¾—æ›´ç³»ç»Ÿçš„æ”¯æŒæ–¹æ¡ˆã€‚";
                });

                const actionGuides = [
                    { title: "Behavioral Log", content: "ä½¿ç”¨â€˜ABCè®°å½•æ³•â€™ï¼ˆå‰å› -è¡Œä¸º-åæœï¼‰ï¼Œè¿ç»­è®°å½• 7 å¤©å­©å­æœ€å…¸å‹çš„å†²çªäº‹ä»¶ã€‚" },
                    { title: "Environmental Audit", content: "å½»åº•æ¸…ç†å­¦ä¹ åŒºçš„è§†è§‰å¹²æ‰°ï¼Œç¡®ä¿ä¹¦æ¡Œä¸Šåªå­˜åœ¨å½“å‰ä»»åŠ¡æ‰€éœ€çš„å”¯ä¸€å·¥å…·ã€‚" },
                    { title: "Professional Consult", content: "é¢„çº¦å‘è‚²è¡Œä¸ºå„¿ç§‘ï¼Œæºå¸¦æœ¬æ¬¡æµ‹è¯„ç»“æœåŠè€å¸ˆçš„åé¦ˆï¼Œè¿›è¡Œ SNAP-IV å’Œ IVA-CP ä¸“ä¸šè”æµ‹ã€‚" }
                ];

                const copyWeChat = () => {
                    const wechatId = 'ADHD-Support-Team';
                    navigator.clipboard.writeText(wechatId).then(() => {
                        copyStatus.value = 'âœ… å¤åˆ¶æˆåŠŸï¼Œå»å¾®ä¿¡æœç´¢';
                        setTimeout(() => copyStatus.value = '', 3000);
                    }).catch(() => {
                        alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥ï¼š' + wechatId);
                    });
                };

                const reset = () => {
                    step.value = 'welcome';
                    currentQuestionIndex.value = 0;
                    score.value = 0;
                    isSaving.value = false;
                };

                const saveAsImage = async () => {
                    if (isSaving.value) return;
                    isSaving.value = true;
                    
                    try {
                        const element = document.getElementById('capture-area');
                        const canvas = await html2canvas(element, {
                            useCORS: true,
                            scale: 2, // æé«˜æ¸…æ™°åº¦
                            backgroundColor: '#F0F4F8'
                        });
                        
                        const link = document.createElement('a');
                        link.download = `ADHDæµ‹è¯„ç»“æœ-${new Date().getTime()}.png`;
                        link.href = canvas.toDataURL('image/png');
                        link.click();
                    } catch (error) {
                        console.error('ä¿å­˜å›¾ç‰‡å¤±è´¥:', error);
                        alert('ä¿å­˜å›¾ç‰‡å¤±è´¥ï¼Œè¯·å°è¯•æˆªå›¾ä¿å­˜');
                    } finally {
                        isSaving.value = false;
                    }
                };

                return {
                    step, currentQuestionIndex, questions, options, startTest, selectOption, 
                    resultTitle, resultDescription, actionGuides, reset, score,
                    saveAsImage, isSaving, copyWeChat, copyStatus
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
